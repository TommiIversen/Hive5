@page "/"
@using Engine.Models
@using Engine.Services
@inject StreamHubService StreamHubService

<h3>Engine Dashboard</h3>

<p>Engine ID: @StreamHubService.EngineId</p>

@if (StreamHubService.Workers.Count == 0)
{
<p>Ingen workers forbundet.</p>
}
else
{
<table class="table">
    <thead>
    <tr>
        <th>Worker ID</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var worker in StreamHubService.Workers.Values)
    {
    <tr>
        <td>@worker.WorkerId</td>
        <td>
            @if (worker.IsRunning)
            {
            <button @onclick="() => StopWorker(worker)">Stop</button>
            }
            else
            {
            <button @onclick="() => StartWorker(worker)">Start</button>
            }
        </td>
    </tr>
    }
    </tbody>
</table>
}

@code {
private void StartWorker(Worker worker)
{
worker.Start();
}

private void StopWorker(Worker worker)
{
worker.Stop();
}
}
